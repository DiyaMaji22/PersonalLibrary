<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'gruvbox-bg': '#282828',
                        'gruvbox-bg-soft': '#32302f',
                        'gruvbox-fg': '#ebdbb2',
                        'gruvbox-red': '#cc241d',
                        'gruvbox-green': '#98971a',
                        'gruvbox-yellow': '#d79921',
                        'gruvbox-blue': '#458588',
                        'gruvbox-purple': '#b16286',
                        'gruvbox-aqua': '#689d6a',
                        'gruvbox-orange': '#d65d0e',
                        'gruvbox-gray': '#928374',
                        'gruvbox-light-bg': '#3c3836',
                        'gruvbox-lighter-bg': '#504945',
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gruvbox-bg min-h-screen py-8 flex justify-center items-center">
    <!-- Back Navigation -->
    <div class="fixed top-4 left-4 z-20">
        <a href="../../index.html"
            class="flex items-center gap-2 px-4 py-2 bg-gruvbox-bg-soft hover:bg-gruvbox-light-bg text-gruvbox-fg rounded-lg border border-gruvbox-gray transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18">
                </path>
            </svg>
            Back to Home
        </a>
    </div>
    <!-- Search Bar -->
    <div class="fixed top-4 left-1/2 transform -translate-x-1/2 z-10">
        <div class="bg-gruvbox-bg-soft rounded-lg shadow-lg border border-gruvbox-lighter-bg p-4">
            <div class="flex gap-2">
                <input type="text" id="bookSearchInput"
                    placeholder="Search for a book (e.g., 'Pride and Prejudice Jane Austen')"
                    class="px-4 py-2 bg-gruvbox-light-bg text-gruvbox-fg border border-gruvbox-gray rounded-lg focus:outline-none focus:border-gruvbox-blue w-80">
                <button id="searchBtn"
                    class="px-6 py-2 bg-gruvbox-blue hover:bg-gruvbox-aqua text-gruvbox-fg font-semibold rounded-lg transition-colors">
                    Search
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-20">
        <div class="bg-gruvbox-bg-soft rounded-xl shadow-lg overflow-hidden border border-gruvbox-lighter-bg">
            <div class="flex flex-col lg:flex-row">
                <!-- Book Image Section -->
                <div class="lg:w-1/3 p-6 lg:p-8">
                    <div class="sticky top-8">
                        <div
                            class="aspect-[3/4] bg-gruvbox-lighter-bg rounded-lg overflow-hidden mb-4 border border-gruvbox-gray">
                            <img id="bookImage" src="../../public/assets/books/agathacristie/murderonorient.jpg"
                                alt="Book Cover" class="w-full h-full object-cover">
                        </div>

                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            <button
                                class="w-full bg-gruvbox-green hover:bg-green-700 text-gruvbox-bg font-semibold py-3 px-6 rounded-lg transition-colors">
                                Want to Read
                            </button>
                            <button
                                class="w-full border-2 border-gruvbox-gray hover:border-gruvbox-fg text-gruvbox-fg font-semibold py-3 px-6 rounded-lg transition-colors hover:bg-gruvbox-light-bg">
                                Buy on Amazon
                            </button>
                        </div>

                        <!-- Rating Section -->
                        <div class="mt-6 text-center">
                            <div class="flex justify-center mb-2">
                                <div class="flex space-x-1" id="starRating">
                                    <!-- Stars will be generated by JavaScript -->
                                </div>
                            </div>
                            <p class="text-sm text-gruvbox-gray">Rate this book</p>
                        </div>
                    </div>
                </div>

                <!-- Book Details Section -->
                <div class="lg:w-2/3 p-6 lg:p-8">
                    <div class="mb-4">
                        <h1 id="bookTitle" class="text-3xl lg:text-4xl font-bold text-gruvbox-fg mb-2">
                            Murder On The Orient Express
                        </h1>
                        <p id="authorName" class="text-lg text-gruvbox-gray mb-4">
                            Agatha Christie
                        </p>

                        <!-- Rating and Stats -->
                        <div class="flex items-center gap-4 mb-6">
                            <div class="flex items-center">
                                <div class="flex text-gruvbox-yellow mr-2" id="displayStars">
                                    <!-- Display stars will be generated by JavaScript -->
                                </div>
                                <span id="ratingScore" class="text-xl font-semibold text-gruvbox-fg">4.5</span>
                            </div>
                            <span id="ratingCount" class="text-gruvbox-gray">33,549 ratings</span>
                        </div>
                    </div>

                    <!-- Book Description -->
                    <div class="mb-6">
                        <p id="bookDescription" class="text-gruvbox-fg leading-relaxed text-base">

                        </p>
                        <button id="showMoreBtn"
                            class="text-gruvbox-blue hover:text-gruvbox-aqua font-medium mt-2 transition-colors">
                            Show more
                        </button>
                    </div>

                    <!-- Genres -->
                    <div class="mb-6">
                        <p class="text-sm text-gruvbox-gray mb-2">Genres</p>
                        <div class="flex flex-wrap gap-2" id="genreContainer">
                            <!-- Genres will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Book Info -->
                    <div class="mb-6">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gruvbox-gray">Pages:</span>
                                <span id="pageCount" class="ml-2 text-gruvbox-fg">295 pages, ebook</span>
                            </div>
                            <div>
                                <span class="text-gruvbox-gray">First published:</span>
                                <span id="publishDate" class="ml-2 text-gruvbox-fg">January 1, 2009</span>
                            </div>
                        </div>
                    </div>


                    <!-- About the Author -->
                    <div class="border-t border-gruvbox-lighter-bg pt-6 mt-6">
                        <h3 class="text-xl font-semibold text-gruvbox-fg mb-4">About the author</h3>
                        <div class="flex items-start gap-4">
                            <div
                                class="w-16 h-16 bg-gruvbox-lighter-bg rounded-full flex-shrink-0 overflow-hidden border border-gruvbox-gray">
                                <img id="authorImage" src="../../public/assets/books/agathacristie/theauthor.jpg"
                                    alt="Author" class="w-full h-full object-cover">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 id="authorNameFull" class="font-semibold text-gruvbox-fg">Agatha Christie</h4>
                                </div>
                                <p class="text-sm text-gruvbox-gray mb-2">
                                    <span id="bookCount">60+</span>
                                </p>
                                <p id="authorBio" class="text-sm text-gruvbox-fg leading-relaxed">
                                    Born in Torquay in 1890, Agatha Christie began writing during the First World War
                                    and wrote over 100 novels, plays and
                                    short story collections. She was still writing to great acclaim until her death, and
                                    her books have now sold over a
                                    billion copies in English and another billion in over 100 foreign languages. Yet
                                    Agatha Christie was always a very
                                    private person, and though Hercule Poirot and Miss Marple became household names,
                                    the Queen of Crime was a complete
                                    enigma to all but her closest friends.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize the page
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            // Load book data for "Murder on the Orient Express" by default
            searchAndLoadBook('Murder on the Orient Express Agatha Christie');

            // Note: generateStars() is not called here because stars will be generated by the API
            generateGenres();
            setupShowMore();
            setupBookSearch();
        });

        // Setup book search functionality
        function setupBookSearch() {
            const searchInput = document.getElementById('bookSearchInput');
            const searchBtn = document.getElementById('searchBtn');

            searchBtn.addEventListener('click', function () {
                const query = searchInput.value.trim();
                if (query) {
                    searchAndLoadBook(query);
                }
            });

            searchInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    const query = searchInput.value.trim();
                    if (query) {
                        searchAndLoadBook(query);
                    }
                }
            });
        }

        // Google Books API functions
        function searchAndLoadBook(query) {
            // Show loading state
            showLoadingState();

            // Create XMLHttpRequest
            const xhr = new XMLHttpRequest();
            const url = `https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(query)}&maxResults=10`;

            xhr.open('GET', url, true);

            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        const data = JSON.parse(xhr.responseText);
                        if (data.items.length > 0) {
                            let selectedbook = dta.items[0];
                            for (let i = 0; i < data.items.length; i++) {
                                const book = data.items[i];
                                const info = book.volumeinfo;
                                if (info.authors && info.authors.length > 0 && info.authors.toLowerCase().include('agatha christie') && info.title.toLowerCase().include('murder') && info.title.toLowerCase().include('orient express') && !info.title.toLowerCase().include('graphic') && !info.title.toLowerCase().include('adaptation')) {
                                    selectedbook = book;
                                    break;
                                }
                            }
                            if(selectedbook===data.items[0])
                            {
                                for(let i=0;i<data.items.length;i++){
                                    const book=data.items[i];
                                    
                                }
                            }
                        }
                    }
                }
            }
        }

    </script>
</body>

</html>